/**
 * qenru Form Validation v1.0.0
 * http://plugin.softbax.com/qenruValidation
 *
 * Copyright 2015, Turhan Onur Döğücü - http://onurdogucu.com ( Under Construction )
 * Written while dreaming about "validating my dreams", time to bring life back :)
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */

function errors(e,r,a,t){r=void 0===r?"":r;var n=new Array;return n[0]=""==r?"Fill the required field(s) !":sprintf("Please Fill the %s field !.",r),n[1]="Email must be in correct format !",n[2]="Phone Number must be in correct format !",n[3]="Values are not matching!",n[4]=sprintf("%s field should have min. %s characters length !.",r,a),n[5]=sprintf("%s field should have max. %s characters length !.",r,t),n[e]}function addErrorToField(e,r){e.addClass("input-error"),"inline"==r&&e.next("span").addClass("active")}function removeErrorFromField(e,r){e.removeClass("input-error"),"inline"==r&&(e.next("span.form-error").removeClass("active"),e.parent().next("span.form-error").removeClass("active"))}function emptyValidation(e){var r=e.val();return r=null!=r?r.trim():r,""==r||null==r||void 0===r?(addErrorToField(e),!0):(removeErrorFromField(e),!1)}function emailValidation(e){var r=e.val();return validateEmail(r)===!1?(e.addClass("input-error"),!0):(e.removeClass("input-error"),!1)}function phoneValidation(e){var r=e.val();return validatePhone(r)===!1?(e.addClass("input-error"),!0):(e.removeClass("input-error"),!1)}function radiocheckboxValidation(e){return $("input[name="+e.attr("name")+"]:checked").length<=0?(e.addClass("input-error"),!0):(e.removeClass("input-error"),!1)}function checkLength(e,r,a,t,n){var l=!1,s=e.val(),i=s.length;return l=emptyValidation(e),l||("undefined"!=typeof r&&"undefined"==typeof a?r>i?(l=!0,pushErrorMessage(4,e,t,r,a,n)):removeErrorFromField(e,n):"undefined"==typeof r&&"undefined"!=typeof a?i>a?(l=!0,pushErrorMessage(5,e,t,r,a,n)):removeErrorFromField(e,n):i>a||r>i?(l=!0,pushErrorMessage("4",e,t,r,a,n),pushErrorMessage("5",e,t,r,a,n)):removeErrorFromField(e,n)),l}function checkMatch(e,r,a,t){var n=new Array,t=!1,l=e.attr("data-rel");return $('input[data-rel="'+l+'"]').each(function(){var e=$(this).val();n.push(e)}),t=n.allValuesSame(),t&&($('input[data-rel="'+l+'"]').addClass("input-error"),this.err_arr=new Array("3"),pushErrorMessage(3,e,"",null,null,a)),t}function pushErrorMessage(e,r,a,t,n,l){var s="";if(s=errors(e,a,t,n),"sweetalert"==l){if(-1!==jQuery.inArray(s,this.selectedErrorArr))return void r.addClass("input-error");r.addClass("input-error"),selectedErrorArr.push(s)}else r.addClass("input-error"),r.parent().next("span").html(s).addClass("active"),r.next("span").html(s).addClass("active")}function sprintf(e){for(var r=1;r<arguments.length;r++)e=e.replace(/%s/,arguments[r]);return e}function phoneMaskArray(e){for(var r=0;r<e.length;r++)$("#"+e[r]).find($('*[data-type="tel"]')).each(function(){$(this).mask("(999) 999-9999")})}function phoneMask(e){$("#"+e).find($('*[data-type="tel"]')).each(function(){$(this).mask("(999) 999-9999")})}function validateEmail(e){var r=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return r.test(e)}function validatePhone(e){var r=/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/;return r.test(e)}function dataPost(e,r,a,t,n,l){$.ajax({url:r,dataType:a,type:t,data:e,success:n,error:l})}var canFormSubm=!1,selectedErrorArr=new Array,defaults={url:"/",ajaxRequest:!1,dataType:"html",requestMethod:"post",alertType:"inner",phoneMask:!1,ajaxOnSuccess:function(){},ajaxOnError:function(){}};$.fn.qValidate=function(e){var r={};r.settings=$.extend({},defaults,e);var a=this,t=r.settings.phoneMask;t&&phoneMask(a.attr("id")),this.submit(function(e){if(!canFormSubm){var t=a.attr("id"),n=r.settings.url,l=r.settings.ajaxRequest,s=r.settings.dataType,i=r.settings.requestMethod,o=r.settings.alertType,u=r.settings.ajaxOnSuccess,d=r.settings.ajaxOnError;selectedErrorArr=[];var c,m,h,p,f=!1,v=!1,g=!1,y="";if($("#"+t+" .input-group").each(function(){var e=$(this);if(c=e.attr("type"),m=e.attr("data-type"),p=e.attr("data-required"),is_require_match=e.attr("data-match"),min_length=e.attr("data-min"),max_length=e.attr("data-max"),label=e.attr("data-label"),h=null,"undefined"!=typeof m&&m!==!1?h=m:"undefined"!=typeof c&&c!==!1&&(h=c),"true"==p)switch(h){case"text":f=1==emptyValidation(e)?!0:f,g=emptyValidation(e),g?pushErrorMessage(0,e,label,null,null,o):removeErrorFromField(e,o);break;case"password":f=1==emptyValidation(e)?!0:f,g=emptyValidation(e),g?pushErrorMessage(0,e,label,null,null,o):removeErrorFromField(e,o);break;case"select":f=1==emptyValidation(e)?!0:f,g=emptyValidation(e),g?pushErrorMessage(0,e,label,null,null,o):removeErrorFromField(e,o);break;case"email":f=1==emailValidation(e)?!0:f,g=emailValidation(e),g?pushErrorMessage(1,e,label,null,null,o):removeErrorFromField(e,o);break;case"tel":f=1==phoneValidation(e)?!0:f,g=phoneValidation(e),g?pushErrorMessage(2,e,label,null,null,o):removeErrorFromField(e,o);break;case"file":f=1==emptyValidation(e)?!0:f,g=emptyValidation(e),g?pushErrorMessage(0,e,label,null,null,o):removeErrorFromField(e,o);break;case"radio":case"checkbox":f=1==radiocheckboxValidation(e)?!0:f,g=radiocheckboxValidation(e),g?pushErrorMessage(0,e,label,null,null,o):removeErrorFromField(e,o);break;default:return sweetAlert("An Error Occured! Try again later.","","error"),!1}"true"==is_require_match&&(f=v=checkMatch(e,t,o,f),console.log(f)),v||("undefined"!=typeof min_length&&min_length!==!1&&(f=checkLength(e,min_length,max_length,label,o)),"undefined"!=typeof max_length&&max_length!==!1&&(f=checkLength(e,min_length,max_length,label,o)))}),!f&&l){var t=$("#"+t).serialize();dataPost(t,n,s,i,u,d)}else if("sweetalert"==o)if(f){canFormSubm=!1,e.preventDefault();for(var E=0;E<selectedErrorArr.length;E++)y+=selectedErrorArr[E]+"\n";sweetAlert(y,"","error")}else canFormSubm=!0,sweetAlert("Form successfully validated","","success");else f?(e.preventDefault(),canFormSubm=!1):(canFormSubm=!0,a.submit())}})},Array.prototype.allValuesSame=function(){for(var e=1;e<this.length;e++)if(this[e]!==this[0])return!0;return!1};
